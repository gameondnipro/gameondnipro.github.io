{% extends "_base.html" %}

{% block title %}Ð‘Ð°Ð·Ð° ÑˆÐ²Ð¸Ð´ÐºÐ¸Ñ… Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÐµÐ¹ (FAQ){% endblock %}

{% block content %}
<h1 class="mb-4">ðŸ“š FAQ </h1>

<form method="GET" action="{{ url_for('faq_list') }}" class="d-flex mb-4">
    <input class="form-control form-control-lg me-2" type="search" 
           placeholder="Ð¨ÑƒÐºÐ°Ñ‚Ð¸ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑŒ..." name="faq_q" 
           value="{{ search_term or '' }}">
    <button class="btn btn-primary btn-lg" type="submit">
        <i class="bi bi-search"></i>
    </button>
</form>

<div class="accordion" id="faqAccordion">
    {% for faq in faqs %}
    <div class="accordion-item shadow-sm mb-2">
        <h2 class="accordion-header" id="heading{{ faq.id }}">
            <button class="accordion-button {% if not loop.first %}collapsed{% endif %}" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#collapse{{ faq.id }}" 
                    aria-expanded="{% if loop.first %}true{% else %}false{% endif %}" 
                    aria-controls="collapse{{ faq.id }}">
                {{ faq.title }}
            </button>
        </h2>
        <div id="collapse{{ faq.id }}" class="accordion-collapse collapse {% if loop.first and not search_term %}show{% endif %}" 
             aria-labelledby="heading{{ faq.id }}" data-bs-parent="#faqAccordion">
            <div class="accordion-body">
                {{ faq.content | safe }} 
                <hr>
                <form method="POST" action="{{ url_for('faq_delete', faq_id=faq.id) }}" class="text-end">
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Ð’Ð¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ–, Ñ‰Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚Ðµ Ð²Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸ Ñ†ÑŽ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑŒ?');">
                        Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}